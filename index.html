<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>QOTD Generator</title>
  <style>
    :root{
      --bg1:#fff7fb;
      --bg2:#f3fbff;
      --ink:#1b1b1f;
      --muted:#5b5b66;
      --panel:#ffffff;
      --stroke: rgba(35, 35, 40, .18);
      --shadow: 0 18px 45px rgba(20, 20, 30, .12);
      --accent:#6c5ce7;
      --btn:#1f2430;
      --btnText:#ffffff;
      --ring: 0 0 0 3px rgba(108, 92, 231, .25);
      --radius: 18px;
    }

    @media (prefers-color-scheme: dark){
      :root{
        --bg1:#0b0b12;
        --bg2:#101827;
        --ink:#f2f3f7;
        --muted:#b7b8c2;
        --panel:#121624;
        --stroke: rgba(255,255,255,.14);
        --shadow: 0 18px 45px rgba(0,0,0,.55);
        --btn:#f2f3f7;
        --btnText:#121624;
        --ring: 0 0 0 3px rgba(0, 194, 168, .25);
      }
    }

    *{ box-sizing: border-box; }
    body{
      margin: 0;
      min-height: 100vh;
      font-family: ui-rounded, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      color: var(--ink);
      background:
        radial-gradient(circle at 12px 12px, rgba(255,107,154,.18) 2px, transparent 3px) 0 0/28px 28px,
        radial-gradient(circle at 26px 24px, rgba(0,194,168,.15) 2px, transparent 3px) 0 0/34px 34px,
        linear-gradient(135deg, var(--bg1), var(--bg2));
      padding: 40px 18px;
      display: grid;
      place-items: center;
    }

    .card{
      width: min(900px, 100%);
      border-radius: calc(var(--radius) + 10px);
      background: linear-gradient(180deg, color-mix(in srgb, var(--panel) 96%, transparent), var(--panel));
      border: 1px solid var(--stroke);
      box-shadow: var(--shadow);
      overflow: hidden;
      position: relative;
    }

    .card::before{
      content:"";
      position:absolute;
      inset: 0 0 auto 0;
      height: 76px;
      background:
        repeating-linear-gradient(45deg,
          rgba(108,92,231,.14) 0 14px,
          rgba(0,194,168,.12) 14px 28px,
          rgba(255,107,154,.12) 28px 42px
        );
      border-bottom: 1px solid var(--stroke);
    }

    header{
      position: relative;
      padding: 18px 20px 12px;
      display:flex;
      align-items:flex-start;
      justify-content:space-between;
      gap: 12px;
    }

    h1{
      margin: 0;
      font-size: 22px;
      line-height: 1.1;
    }
    .sub{
      margin: 6px 0 0;
      font-size: 13px;
      color: var(--muted);
    }

    .content{
      padding: 18px 20px 22px;
      display:grid;
      gap: 14px;
    }

    .screen{
      border-radius: var(--radius);
      border: 1px solid var(--stroke);
      background:
        radial-gradient(circle at 24px 24px, rgba(108,92,231,.10) 0 18px, transparent 19px),
        radial-gradient(circle at 68px 52px, rgba(0,194,168,.09) 0 16px, transparent 17px),
        radial-gradient(circle at 120px 34px, rgba(255,107,154,.09) 0 14px, transparent 15px),
        linear-gradient(180deg, color-mix(in srgb, var(--panel) 94%, transparent), color-mix(in srgb, var(--panel) 86%, transparent));
      padding: 18px 18px 16px;
      min-height: 180px;
      display:flex;
      flex-direction: column;
      justify-content: space-between;
      gap: 12px;
    }

    .question{
      font-size: clamp(20px, 2.4vw, 30px);
      line-height: 1.25;
      margin: 0;
    }

    .meta{
      font-size: 12px;
      color: var(--muted);
    }

    button{
      font: inherit;
      border-radius: 14px;
      border: 1px solid var(--stroke);
      padding: 12px 14px;
      cursor: pointer;
      background: var(--btn);
      color: var(--btnText);
      box-shadow: 0 10px 20px rgba(0,0,0,.12);
      transform: translateY(0);
      transition: transform .06s ease, filter .12s ease, box-shadow .12s ease;
      width: fit-content;
    }
    button:hover{ filter: brightness(1.05); }
    button:active{ transform: translateY(1px); }
    button:focus-visible{ outline: none; box-shadow: var(--shadow), var(--ring); }

    .row{
      display:flex;
      gap: 12px;
      flex-wrap: wrap;
      align-items: center;
      justify-content: space-between;
    }
  </style>
</head>
<body>
  <main class="card" role="region" aria-label="QOTD Generator">
    <header>
      <div>
        <h1>QOTD Generator</h1>
        <p class="sub">Click generate to pull a random question (no repeats until the bank is exhausted).</p>
      </div>
    </header>

    <section class="content">
      <div class="screen">
        <p id="question" class="question" aria-live="polite">Click <b>Generate</b> to get today’s question.</p>
        <div id="meta" class="meta"></div>
      </div>

      <div class="row">
        <button id="generateBtn" type="button">Generate</button>
        <div id="countInfo" class="meta"></div>
      </div>
    </section>
  </main>

  <script>
    const TARGET_COUNT = 500;
    const STORAGE_KEY  = "qotd_generator_simple_v1";

    const BANK = {
      adjectives: [
        "oddly satisfying","low-key","surprisingly useful","underrated","overhyped",
        "cozy","chaotic (in a fun way)","tiny but mighty","wholesome","ridiculously specific",
        "unnecessarily fancy","unexpected","delightfully random","weirdly effective","simple"
      ],
      topics: [
        "snack","drink","song","playlist","movie","show","book","podcast","YouTube channel",
        "app","website","tool","keyboard shortcut","desktop setup tweak","phone setting",
        "restaurant","comfort food","dessert","cuisine","scent","color","animal","mythical creature",
        "hobby","board game","party game","museum","place to visit","road trip stop"
      ],
      activities: [
        "relax after work","reset your brain when you’re stuck","celebrate a small win",
        "start your morning","wind down at night","kill time while waiting","spark creativity",
        "get motivated","learn something new","make chores less annoying"
      ],
      workBits: [
        "email","meetings","planning","brainstorming","writing","designing","organizing files",
        "keeping track of tasks","collaboration","presenting","reviewing feedback"
      ],
      questionsPeople: [
        "a fictional character","a celebrity","a historical figure","an athlete","a musician",
        "a chef","an author","a scientist","an artist","a cartoon character"
      ],
      superpowers: [
        "pause time","teleport","speak every language","instantly learn any skill","never lose your keys",
        "perfect memory for names","always find parking","turn any leftovers into something good",
        "fall asleep on command","make any software behave"
      ],
      smallJoys: [
        "a fresh notebook","a perfectly timed meme","good background music","a clean inbox",
        "the first sip of your favorite drink","a comfy hoodie","sunlight through a window",
        "a perfectly ripe piece of fruit","a great pen","a satisfying ‘done’ checklist moment"
      ],
      wouldYouRather: [
        ["only reply in gifs for a day","only reply in voice notes for a day"],
        ["have a personal theme song that plays quietly","have a personal spotlight that follows you (politely)"],
        ["always know the perfect comeback 5 seconds later","always know the perfect answer 5 seconds earlier"],
        ["have unlimited free coffee/tea","have unlimited free snacks"],
        ["be able to fast-forward boring parts of life","be able to rewind awkward moments"]
      ],
      harmlessPersonal: [
        "What’s a food you didn’t like as a kid but like now?",
        "What’s a small thing that instantly puts you in a better mood?",
        "What’s a smell you associate with ‘comfort’?",
        "What’s something you’re looking forward to (big or small)?",
        "What’s your go-to way to recharge when your brain feels full?",
        "What’s a tiny luxury you love?",
        "What’s your current ‘comfort’ show/movie/song?",
        "What’s one hobby you’d try if you had a free afternoon and zero pressure?"
      ],
      lightWork: [
        "What’s a tiny change that would make meetings better?",
        "What’s a tool/template/shortcut you’d recommend to anyone?",
        "What’s one thing you’d love to automate (in a harmless way)?",
        "What’s a ‘good enough’ standard you’ve embraced that actually helps?",
        "What’s a productivity tip that sounds silly but works for you?"
      ]
    };

    function mulberry32(seed) {
      return function() {
        let t = seed += 0x6D2B79F5;
        t = Math.imul(t ^ (t >>> 15), t | 1);
        t ^= t + Math.imul(t ^ (t >>> 7), t | 61);
        return ((t ^ (t >>> 14)) >>> 0) / 4294967296;
      };
    }
    function hashStringToInt(str) {
      let h = 2166136261;
      for (let i = 0; i < str.length; i++) {
        h ^= str.charCodeAt(i);
        h = Math.imul(h, 16777619);
      }
      return h >>> 0;
    }
    function shuffleArray(arr) {
      const copy = [...arr];
      for (let i = copy.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [copy[i], copy[j]] = [copy[j], copy[i]];
      }
      return copy;
    }
    function pick(arr, rnd) {
      return arr[Math.floor(rnd() * arr.length)];
    }
    function format(template, values) {
      return template.replace(/\{(\w+)\}/g, (_, k) => String(values[k] ?? `{${k}}`));
    }

    function generateQuestionBank(targetCount) {
      const seed = hashStringToInt(STORAGE_KEY);
      const rnd  = mulberry32(seed);

      const templates = [
        "What’s your {adj} favorite {topic} right now?",
        "What’s a {adj} {topic} you’d recommend to anyone?",
        "If you could only keep one {topic} forever, what would it be?",
        "What’s a {topic} you think is totally {adj}?",
        "What’s your go-to way to {activity}?",
        "What’s a {adj} thing that helps you {activity}?",
        "If you could have a ‘one-click’ fix for {workBit}, what would it do?",
        "What’s one {adj} habit that helps with {workBit}?",
        "What’s your most-used tip for {workBit}?",
        "If you could invite {personType} to lunch, who would you pick?",
        "What’s a question you wish people asked you more often (light answer ok)?",
        "If you got a free upgrade to {superpower}, how would you use it day-to-day?",
        "What’s a {adj} ‘small joy’ you appreciate lately (example: {smallJoy})?",
        "Would you rather {wyrA} or {wyrB}?",
        "What’s a harmless rule you’d add to make life 5% easier?",
        "What’s something you recently discovered that you’re slightly obsessed with?",
        "What’s a {topic} that feels like ‘you’ and why?",
        "What’s your favorite way to celebrate a tiny win?"
      ];

      const questions = new Set();
      BANK.harmlessPersonal.forEach(q => questions.add(q));
      BANK.lightWork.forEach(q => questions.add(q));

      let guard = 0;
      while (questions.size < targetCount && guard < targetCount * 60) {
        guard++;
        const wyrPair = pick(BANK.wouldYouRather, rnd);
        const values = {
          adj: pick(BANK.adjectives, rnd),
          topic: pick(BANK.topics, rnd),
          activity: pick(BANK.activities, rnd),
          workBit: pick(BANK.workBits, rnd),
          personType: pick(BANK.questionsPeople, rnd),
          superpower: pick(BANK.superpowers, rnd),
          smallJoy: pick(BANK.smallJoys, rnd),
          wyrA: wyrPair[0],
          wyrB: wyrPair[1]
        };
        const t = pick(templates, rnd);
        const q = format(t, values).replace(/\s+/g, " ").trim().replace(/\?{2,}/g, "?");
        if (q.length >= 18 && q.length <= 140) questions.add(q);
      }
      return Array.from(questions);
    }

    function loadState() {
      try {
        const raw = localStorage.getItem(STORAGE_KEY);
        return raw ? JSON.parse(raw) : null;
      } catch {
        return null;
      }
    }
    function saveState(state) {
      localStorage.setItem(STORAGE_KEY, JSON.stringify(state));
    }
    function freshState(bank) {
      return { bank, order: shuffleArray(bank), index: 0, cycle: 1 };
    }
    function ensureValidState(state, bank) {
      if (!state || !Array.isArray(state.bank) || !Array.isArray(state.order) || typeof state.index !== "number") {
        return freshState(bank);
      }
      if (state.bank.length !== bank.length) return freshState(bank);
      const setA = new Set(state.bank);
      const setB = new Set(bank);
      if (setA.size !== setB.size) return freshState(bank);
      for (const q of setB) if (!setA.has(q)) return freshState(bank);
      state.index = Math.max(0, Math.min(state.index, state.order.length));
      state.cycle = state.cycle || 1;
      return state;
    }
    function getNextQuestion(state) {
      if (state.index >= state.order.length) {
        state.order = shuffleArray(state.bank);
        state.index = 0;
        state.cycle += 1;
      }
      const q = state.order[state.index];
      state.index += 1;
      return q;
    }

    const bank = generateQuestionBank(TARGET_COUNT);
    let state = ensureValidState(loadState(), bank);
    saveState(state);

    const qEl = document.getElementById("question");
    const metaEl = document.getElementById("meta");
    const countEl = document.getElementById("countInfo");

    function updateMeta() {
      const remaining = state.order.length - state.index;
      metaEl.textContent = `No repeats • Remaining in this cycle: ${remaining} • Cycle: ${state.cycle}`;
      countEl.textContent = `Bank size: ${state.bank.length}`;
    }

    function generate() {
      const q = getNextQuestion(state);
      saveState(state);
      qEl.textContent = q;
      updateMeta();
    }

    updateMeta();
    document.getElementById("generateBtn").addEventListener("click", generate);
  </script>
</body>
</html>
