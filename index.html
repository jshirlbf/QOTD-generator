<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>QOTD Generator</title>
  <style>
    :root{
      --bg1:#fff7fb;
      --bg2:#f3fbff;
      --ink:#1b1b1f;
      --muted:#5b5b66;
      --panel:#ffffff;
      --stroke: rgba(35, 35, 40, .18);
      --shadow: 0 18px 45px rgba(20, 20, 30, .12);
      --btn:#1f2430;
      --btnText:#ffffff;
      --ring: 0 0 0 3px rgba(108, 92, 231, .25);
      --radius: 18px;
    }
    @media (prefers-color-scheme: dark){
      :root{
        --bg1:#0b0b12;
        --bg2:#101827;
        --ink:#f2f3f7;
        --muted:#b7b8c2;
        --panel:#121624;
        --stroke: rgba(255,255,255,.14);
        --shadow: 0 18px 45px rgba(0,0,0,.55);
        --btn:#f2f3f7;
        --btnText:#121624;
        --ring: 0 0 0 3px rgba(0, 194, 168, .25);
      }
    }
    *{ box-sizing: border-box; }
    body{
      margin: 0;
      min-height: 100vh;
      font-family: ui-rounded, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      color: var(--ink);
      background:
        radial-gradient(circle at 12px 12px, rgba(255,107,154,.18) 2px, transparent 3px) 0 0/28px 28px,
        radial-gradient(circle at 26px 24px, rgba(0,194,168,.15) 2px, transparent 3px) 0 0/34px 34px,
        linear-gradient(135deg, var(--bg1), var(--bg2));
      padding: 40px 18px;
      display: grid;
      place-items: center;
    }
    .card{
      width: min(900px, 100%);
      border-radius: calc(var(--radius) + 10px);
      background: linear-gradient(180deg, color-mix(in srgb, var(--panel) 96%, transparent), var(--panel));
      border: 1px solid var(--stroke);
      box-shadow: var(--shadow);
      overflow: hidden;
      position: relative;
    }
    header{ padding: 18px 20px 12px; }
    h1{ margin:0; font-size:22px; }
    .sub{ margin:6px 0 0; font-size:13px; color:var(--muted); }
    .content{ padding:18px 20px 22px; display:grid; gap:14px; }
    .screen{
      border-radius: var(--radius);
      border: 1px solid var(--stroke);
      background: linear-gradient(180deg, color-mix(in srgb, var(--panel) 94%, transparent), color-mix(in srgb, var(--panel) 86%, transparent));
      padding: 18px;
      min-height: 160px;
      display:flex;
      flex-direction: column;
      justify-content: space-between;
      gap: 12px;
    }
    .question{
      font-size: clamp(20px, 2.2vw, 28px);
      line-height: 1.25;
      margin: 0;
    }
    .meta{ font-size:12px; color:var(--muted); }
    button{
      font: inherit;
      border-radius: 14px;
      border: 1px solid var(--stroke);
      padding: 12px 14px;
      cursor: pointer;
      background: var(--btn);
      color: var(--btnText);
      box-shadow: 0 10px 20px rgba(0,0,0,.12);
      width: fit-content;
    }
    .row{ display:flex; gap:12px; flex-wrap:wrap; align-items:center; justify-content:space-between; }
  </style>
</head>
<body>
  <main class="card" role="region" aria-label="QOTD Generator">
    <header>
      <h1>QOTD Generator</h1>
      <p class="sub">One button. Random questions. No repeats until the full set is used.</p>
    </header>

    <section class="content">
      <div class="screen">
        <p id="question" class="question" aria-live="polite">
          Click <b>Generate</b> to get today’s question.
        </p>
        <div id="meta" class="meta"></div>
      </div>

      <div class="row">
        <button id="generateBtn" type="button">Generate</button>
        <div id="countInfo" class="meta"></div>
      </div>
    </section>
  </main>

<script>
/** ============================
 *  Settings
 *  ============================ */
const TARGET_COUNT = 1000;
const STORAGE_KEY  = "qotd_generator_fun_v4";

/** ============================
 *  Question ingredient banks
 *  - Removed museum prompts
 *  - Heavier on fun/quirky prompts
 *  ============================ */
const BANK = {
  topics: [
    "snack","drink","song","playlist","movie","show","book","podcast","YouTube channel",
    "restaurant","comfort food","dessert","cuisine","scent","color","animal",
    "mythical creature","hobby","board game","party game","road trip stop","seasoning"
  ],

  activities: [
    "relax after work","reset your brain","celebrate a small win",
    "start your morning","wind down at night","spark ideas",
    "get motivated","learn something new","avoid procrastinating"
  ],

  workBits: [
    "email","meetings","planning","brainstorming","writing","editing",
    "organizing files","keeping track of tasks","collaboration","presenting",
    "reviewing feedback","social posts"
  ],

  peopleTypes: [
    "a fictional character","a celebrity","a historical figure","an athlete","a musician",
    "a chef","an author","a scientist","an artist","a cartoon character"
  ],

  wouldYouRather: [
    ["only reply in gifs for a day","only reply in voice notes for a day"],
    ["have a personal theme song","have a personal spotlight that follows you"],
    ["fast-forward boring moments","rewind awkward moments"],
    ["unlimited coffee or tea","unlimited snacks"],
    ["teleport anywhere","pause time"],
    ["always know the perfect comeback (but 10 minutes later)","always know the perfect answer (but 10 minutes early)"],
    ["swap places with your pet for one day","swap places with your boss for one day"],
    ["have a fourth weekend day","have a two-hour lunch break every day"],
    ["only be able to whisper","only be able to speak in movie quotes"],
    ["have to wear roller skates everywhere","have to hop everywhere (politely)"]
  ],

  whoWouldWin: [
    ["a golden retriever","a raccoon"],
    ["a robot vacuum","a house cat"],
    ["a penguin","a goose"],
    ["a squirrel","a rabbit"],
    ["a very confident duck","a slightly grumpy dog"],
    ["one squirrel with a plan","three pigeons with teamwork"],
    ["a toddler with a marker","a fresh white wall"],
    ["a burrito the size of a pillow","a salad with ‘extra everything’"],
    ["a sentient stapler","a chaotic paperclip swarm"]
  ],

  thisOrThat: [
    ["coffee","tea"],
    ["cats","dogs"],
    ["sweet","salty"],
    ["sunrise","sunset"],
    ["texting","calling"],
    ["mountains","beach"],
    ["books","movies"],
    ["early bird","night owl"],
    ["paper notes","digital notes"],
    ["tacos","pizza"]
  ],

  sillyAwards: [
    "Most likely to make a perfect playlist",
    "Most likely to find the best snack",
    "Most likely to remember everyone’s name",
    "Most likely to send the best memes",
    "Most likely to survive a zombie movie",
    "Most likely to win a trivia night",
    "Most likely to adopt a stray animal",
    "Most likely to have a secret talent",
    "Most likely to find the weirdest fun fact"
  ],

  superpowers: [
    "teleport","pause time","talk to animals","instantly learn any skill",
    "perfect memory for names","always find parking","fall asleep on command",
    "make any software behave","never lose your keys","speak every language"
  ],

  directFun: [
    "What is your spirit animal, and why?",
    "What was your favorite toy as a kid?",
    "What snack instantly improves your mood?",
    "What’s a movie you can watch over and over?",
    "If you could live in any fictional world, where would you choose?",
    "What smell instantly makes you nostalgic?",
    "What’s the best road trip snack?",
    "If you had a personal theme song, what would it be?",
    "What’s your most-used emoji, and why?",
    "What’s a harmless hill you’ll die on?",
    "What’s the most random fact you know?",
    "What’s your go-to karaoke song (even if you’d never perform it)?",
    "What’s a food combo you swear is good?",
    "If your life had chapters, what would this chapter be called?",
    "If you could have any animal as a sidekick, what would you pick?",
    "What’s the best ‘little treat’ you can buy for under $5?",
    "What’s your favorite way to celebrate a small win?",
    "What’s a TV show you’d want to be a background character in?",
    "What’s a sound you love (or hate)?",
    "If you could instantly master one hobby, what would it be?",
    "What’s the weirdest compliment you’ve ever received?",
    "If you had to teach a class on something silly, what would it be?"
  ]
};

/** ============================
 *  Helpers
 *  ============================ */
function mulberry32(seed) {
  return function() {
    let t = seed += 0x6D2B79F5;
    t = Math.imul(t ^ (t >>> 15), t | 1);
    t ^= t + Math.imul(t ^ (t >>> 7), t | 61);
    return ((t ^ (t >>> 14)) >>> 0) / 4294967296;
  };
}
function hashStringToInt(str){
  let h = 2166136261;
  for (let i = 0; i < str.length; i++){
    h ^= str.charCodeAt(i);
    h = Math.imul(h, 16777619);
  }
  return h >>> 0;
}
function shuffleArray(arr){
  const copy = [...arr];
  for (let i = copy.length - 1; i > 0; i--){
    const j = Math.floor(Math.random() * (i + 1));
    [copy[i], copy[j]] = [copy[j], copy[i]];
  }
  return copy;
}
function pick(arr, rnd){
  return arr[Math.floor(rnd() * arr.length)];
}
function normalizeKey(q){
  return q
    .toLowerCase()
    .replace(/[’‘]/g, "'")
    .replace(/“|”/g, '"')
    .replace(/[^a-z0-9'\s?]/g, "")   // strip punctuation (keep ? and apostrophes)
    .replace(/\s+/g, " ")
    .trim();
}
function sentenceCase(s){
  if (!s) return s;
  // Keep acronyms and already-capitalized words; just ensure first char is uppercase.
  return s.charAt(0).toUpperCase() + s.slice(1);
}
function capFirst(s){ return s.charAt(0).toUpperCase() + s.slice(1); }

/** ============================
 *  Build 1000 unique questions (deduped by normalized key)
 *  ============================ */
function generateQuestionBank(targetCount){
  const seed = hashStringToInt(STORAGE_KEY);
  const rnd  = mulberry32(seed);

  const templates = [
    // Preferences
    "What’s your favorite {topic}?",
    "What’s your go-to {topic}?",
    "What’s one {topic} you’d recommend to anyone?",
    "What’s a {topic} you loved recently?",
    "What’s a {topic} that you think is overrated or underrated?",
    // This or that
    "Pick one: {a} or {b}?",
    "You can only keep one forever: {a} or {b}?",
    // Would you rather / who would win
    "Would you rather {wyrA} or {wyrB}?",
    "Who would win: {fighterA} or {fighterB}?",
    // Light hypotheticals
    "If you could have {superpower}, how would you use it this week?",
    "If you could instantly master one skill, what would it be?",
    "If you had to eat one cuisine for a week, what would you choose?",
    "If your life had a soundtrack, what’s one song that belongs on it?",
    "If you could only use one emoji for a day, which would it be?",
    "If you could swap jobs with {personType} for a day, who would it be?",
    // Communications-friendly work
    "What’s a tip you’d share for {workBit}?",
    "What’s one small change that would make {workBit} easier?",
    "What’s a meeting habit you appreciate?",
    "What’s a meeting habit you’d gladly retire?",
    "What’s your go-to way to {activity}?",
    // Team-fun
    "Give someone on this team a fun award: {award}. Who gets it?"
  ];

  const questions = new Map(); // key -> original string

  // Seed with hand-written fun questions (already proofread)
  for (const q of BANK.directFun){
    const key = normalizeKey(q);
    if (!questions.has(key)) questions.set(key, q.trim().replace(/\s+/g, " "));
  }

  let guard = 0;
  while (questions.size < targetCount && guard < targetCount * 120){
    guard++;

    const wyr = pick(BANK.wouldYouRather, rnd);
    const duel = pick(BANK.whoWouldWin, rnd);
    const ab = pick(BANK.thisOrThat, rnd);

    const values = {
      topic: pick(BANK.topics, rnd),
      workBit: pick(BANK.workBits, rnd),
      activity: pick(BANK.activities, rnd),
      personType: pick(BANK.peopleTypes, rnd),
      superpower: pick(BANK.superpowers, rnd),
      wyrA: wyr[0],
      wyrB: wyr[1],
      fighterA: duel[0],
      fighterB: duel[1],
      a: ab[0],
      b: ab[1],
      award: pick(BANK.sillyAwards, rnd)
    };

    const t = pick(templates, rnd);
    let q = t
      .replaceAll("{topic}", values.topic)
      .replaceAll("{workBit}", values.workBit)
      .replaceAll("{activity}", values.activity)
      .replaceAll("{personType}", values.personType)
      .replaceAll("{superpower}", values.superpower)
      .replaceAll("{wyrA}", values.wyrA)
      .replaceAll("{wyrB}", values.wyrB)
      .replaceAll("{fighterA}", values.fighterA)
      .replaceAll("{fighterB}", values.fighterB)
      .replaceAll("{a}", values.a)
      .replaceAll("{b}", values.b)
      .replaceAll("{award}", values.award);

    q = q.replace(/\s+/g, " ").trim();
    q = sentenceCase(q);
    if (!q.endsWith("?")) q += "?";

    const key = normalizeKey(q);
    // Additional guard: avoid near-duplicates like “What’s your favorite snack?” vs “What is your favorite snack?”
    if (!questions.has(key) && q.length >= 14 && q.length <= 160){
      questions.set(key, q);
    }
  }

  return Array.from(questions.values());
}

/** ============================
 *  No-repeat state (per device/browser)
 *  ============================ */
function loadState(){
  try {
    const raw = localStorage.getItem(STORAGE_KEY);
    return raw ? JSON.parse(raw) : null;
  } catch { return null; }
}
function saveState(state){
  localStorage.setItem(STORAGE_KEY, JSON.stringify(state));
}
function freshState(bank){
  return { bank, order: shuffleArray(bank), index: 0, cycle: 1 };
}
function ensureValidState(state, bank){
  if (!state || !Array.isArray(state.bank) || !Array.isArray(state.order)){
    return freshState(bank);
  }
  if (state.bank.length !== bank.length) return freshState(bank);
  state.index = Math.max(0, Math.min(state.index, state.order.length));
  state.cycle = state.cycle || 1;
  return state;
}
function getNextQuestion(state){
  if (state.index >= state.order.length){
    state.order = shuffleArray(state.bank);
    state.index = 0;
    state.cycle += 1;
  }
  const q = state.order[state.index];
  state.index += 1;
  return q;
}

/** ============================
 *  App
 *  ============================ */
const bank = generateQuestionBank(TARGET_COUNT);
let state = ensureValidState(loadState(), bank);
saveState(state);

const qEl = document.getElementById("question");
const metaEl = document.getElementById("meta");
const countEl = document.getElementById("countInfo");

function updateMeta(){
  const remaining = state.order.length - state.index;
  metaEl.textContent = `No repeats • Remaining: ${remaining} • Cycle: ${state.cycle}`;
  countEl.textContent = `Bank size: ${state.bank.length}`;
}
function generate(){
  const q = getNextQuestion(state);
  saveState(state);
  qEl.textContent = q;
  updateMeta();
}

updateMeta();
document.getElementById("generateBtn").addEventListener("click", generate);
</script>
</body>
</html>
